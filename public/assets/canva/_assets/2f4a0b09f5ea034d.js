(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[36455],{

/***/ 894240:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(744054);self._5f74ec40302898c5a55451c9fbd04240 = self._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var rK=__c.rK;var X=__c.X;var J=__c.J;var La=__c.La;var Qcc,Scc,Rcc,Ucc,Xcc,Wcc,Zcc,bdc,edc,idc,ldc,odc,gdc,rdc,tdc,vdc;__c.b5=function(a){return{type:1,Component:a}};__c.c5=function(){return a=>a};__c.d5=function(a){return()=>({...Pcc,...a})};Qcc=function(a,b){return{element:__c.b5(a),exports:b}};
Scc=async function(a,b){const c=b.requestId,d=b.path;b=b.payload;const e=a.requestHandler.get(d);if(e){a.e4.PZ.send({type:"ack",requestId:c});var f=setInterval(()=>a.e4.PZ.send({type:"ack",requestId:c}),9E3);try{var g=await e(b);clearInterval(f);a.e4.PZ.send({type:"response",requestId:c,payload:g})}catch(k){clearInterval(f);g="internal_error";b="Something went wrong on our end, if this issue persists please contact us.";if(k instanceof e5){var h=k;k.code==="internal_error"?a.G.Fb(k,{Ae:"Internal error in comms handler",
tags:new Map([["type","request"],["path",d]])}):(g=k.code,b=k.Xsb)}else a.Htb?a.G.Fb(k,{Ae:"Unexpected error type thrown from comms handler",tags:new Map([["type","request"],["path",d]])}):a.rdb.error(k);g=Rcc(a.e4,c,g,b);g.ok||a.G.VM(g.error,{Ae:"unable to send error response",tags:new Map([["type","request"],["path",d]])})}if(h!=null)for(const k of a.sfb)try{k(h)}catch(l){a.G.mD(l,{Ae:"Error executing errorObserver"})}}else h=Rcc(a.e4,c,"internal_error",`No request handler configured for path: "${d}".`),
h.ok||a.G.VM(h.error,{Ae:"unable to send error response",tags:new Map([["type","request"],["path",d]])})};Rcc=function(a,b,c,d){return a.PZ.send({type:"error",requestId:b,code:c,message:d})};Ucc=function({src:a,srcdoc:b,sandbox:c}){if(b.length!==0||!c.contains("allow-same-origin"))return Tcc;a=(new URL(a)).origin;return a==="null"?Tcc:{SEa:a,L_a:a}};
Xcc=async function(a,b,c,{addEventListener:d,removeEventListener:e}=window){const f=new Vcc(6E4),g=Ucc(c),h=c.contentWindow;if(!h)throw new e5({code:"internal_error",message:"contentWindow is missing from iFrame"});c=({data:k,source:l,origin:m})=>{var n;(k===null||k===void 0?0:(n=k.source)===null||n===void 0?0:n.startsWith("react-"))||(m!==g.SEa?Wcc(m)||b.info("received message event from an unexpected origin",{extra:new Map([["expected",g.SEa],["actual",m]])}):l!==h?l!==window&&b.info("source and content window do not match",
{extra:new Map([["data.source",k===null||k===void 0?void 0:k.source]])}):(l=k?k.source?k.source!=="iframe"?La("invalid source"):(0,__c.Ka)():La("'source' is missing in MessageEvent data object"):La("missing 'data' field in MessageEvent"),l.ok?(h.postMessage({source:"parent"},g.L_a,[a]),f.resolve(void 0)):b.IL(l.error,{extra:new Map([["data.source",k===null||k===void 0?void 0:k.source]])})))};d("message",c);try{await f.promise()}finally{e("message",c)}};Wcc=function(a){return Ycc.some(b=>a.endsWith(b))};
Zcc=function(a,b,c,d){a.handle("SET_CONFIG",async e=>{if(e===void 0)throw new e5({code:"internal_error",message:"SET_CONFIG: request cannot be undefined."});e=b.qb(e);e=await c(e);if(d)return d.zb(e)})};bdc=async function(a,b){a=await a.R$.request("RENDER_EDIT_PANEL",$cc.zb(b));if(!a.ok)throw Error(`Encountered an error while sending ${"RENDER_EDIT_PANEL"} request: ${a.error}`);if(a.value==null)throw Error("RENDER_EDIT_PANEL: Result cannot be empty");return adc.qb(a.value)};
edc=function(a,b){Zcc(a,cdc,c=>b.Rsa(c),ddc)};idc=async function(a,b){a=await a.R$.request("RENDER_ELEMENT",fdc.zb(b));a=gdc(a,"RENDER_ELEMENT");return hdc.qb(a)};ldc=async function(a,b){a=await a.R$.request("SET_CAPABILITY",jdc.zb(b));a=gdc(a,"SET_CAPABILITY");return kdc.qb(a)};odc=function(a,b){Zcc(a,mdc,c=>b.Rsa(c),ndc)};gdc=function(a,b){if(!a.ok)throw Error(`Encountered an error while sending ${b} request: ${a.error}`);if(a.value==null)throw Error(`${b}: Result cannot be empty`);return a.value};
rdc=async function(a,b,c){const {port1:d,port2:e}=new MessageChannel,f=new pdc(d,b);await Xcc(e,b,a,window);a=new qdc(f);c&&odc(f,c);return a};tdc=async function(a,b,c){const {port1:d,port2:e}=new MessageChannel,f=new pdc(d,b);await Xcc(e,b,a,window);a=new sdc(f);edc(f,c);return a};vdc=async function(a,b){if(a.sI)try{return(await a.sI.OJb(new udc({id:b,Gjb:!0}))).url}catch(c){a.G.Fb(c)}};__c.ud.prototype.VM=__c.ia(3,function(a,b){this.console.error(...__c.td(this,"critical",a,b))});
__c.MJ.prototype.VM=__c.ia(2,function(a,b){this.Xt.VM(a,b);__c.KJ(this,a,"critical",b)});var wdc=__webpack_require__(400770).reaction;var xdc=__webpack_require__(31968).jsx;var ydc=__webpack_require__(845212),zdc=ydc.useEffect,Adc=ydc.useState;var Pcc=Object.freeze({document:Object.freeze({}),element:Object.freeze({})});var Bdc=__c.d5({element:__c.ZZ({Jna:(0,__c.d_)("blueprintId"),o5a:(0,__c.d_)("variantId"),type:(0,__c.d_)("type"),domain:(0,__c.d_)("domain")})}),Cdc=__c.c5()(({aa:{Hna:a}})=>({element:{type:0,cB:({element:b})=>{const c=a.fgb(b.Jna);if(!c)throw Error(`Blueprint ${b.Jna} not found`);const d=c.variants.get(b.o5a);if(!d)throw Error(`Variant ${b.o5a} not found for blueprint ${b.Jna}`);return b.type==="source"?{La:d.elements}:{La:new __c.a_(()=>d.elements.map(e=>{e=__c.wI.ea(e);return __c.PH.create({...e,
locked:!0,Hh:!0,mi:d.mi})}))}}},exports:{}}));var Ddc=__c.d5({element:__c.ZZ({xKa:(0,__c.JYb)("i"),config:(0,__c.f_)("c")})});var Edc=class{};var e5=class extends Error{constructor(a){a.code=a.code;const b=a.message.endsWith(".")?"":".";super(`[${a.code}]:  ${a.message}${b}`.trim());this.code=a.code;this.name="CanvaError";this.Xsb=a.message;Object.setPrototypeOf(this,e5.prototype)}};var Fdc=class{constructor(a,b,c){this.handler=a;this.port=b;this.G=c;this.send=d=>{try{return this.port.postMessage(d),(0,__c.Ka)()}catch(e){return this.G.Fb(e),La(e)}};this.oqb=d=>{this.G.Fb(d)};this.Pwa=({data:d})=>{if(d)try{this.handler.btb(d)}catch(e){this.G.Fb(e)}else this.G.error(new e5({code:"internal_error",message:"missing data in 'MessageEvent'"}))};this.port.onmessage=this.Pwa;this.port.onmessageerror=this.oqb}};var Gdc=class extends Error{constructor(){super("[internal_error] Comms promise timed out.")}},Vcc=class{reset(a){a&&(this.timeoutMs=a);this.setTimeout()}resolve(a){clearTimeout(this.Qd);this.Qtb(a)}reject(a){clearTimeout(this.Qd);this.mZa(a)}promise(){return this.p}setTimeout(){clearTimeout(this.Qd);this.Qd=setTimeout(()=>{this.mZa(new Gdc)},this.timeoutMs)}constructor(a){this.timeoutMs=a;this.p=new Promise((b,c)=>{this.Qtb=b;this.mZa=c});this.setTimeout()}};var Hdc=class{request(a,b){const c=this.QXa,d=new Vcc(5E3),e=this.Jtb(),f=async function(){c.set(e,d);try{const g=await d.promise();return(0,__c.Ka)(g)}catch(g){return g instanceof Gdc?La(new e5({code:"internal_error",message:`Comms promise timed out (${a}).`})):La(g)}finally{c.delete(e)}}();b=this.send(e,a,b);b.ok||(this.G.Fb(b.error,{Ae:"unable to send request",tags:new Map([["type","request"],["path",a]])}),d.reject(b.error));return f}constructor(a,b){this.send=a;this.G=b;this.Jtb=__c.up;this.QXa=
new Map}};var Idc=class{handle(a,b){if(this.requestHandler.has(a))throw new e5({code:"internal_error",message:`Handler for '${a}' is already defined.`});this.requestHandler.set(a,b)}constructor(a,b){var c=console;this.e4=a;this.G=b;this.Htb=!0;this.rdb=c;this.requestHandler=new Map;this.sfb=new Set}};var pdc=class{constructor(a,b){this.request=(c,d)=>this.client.request(c,d);this.handle=(c,d)=>this.requestHandler.handle(c,d);a=new Jdc(c=>{switch(c.type){case "ack":case "error":case "response":var d=this.client;const e=c.requestId,f=c.type,g=d.QXa.get(e);if(g)switch(f){case "response":g.resolve(c.payload);break;case "ack":g.reset(2E4);break;case "error":g.reject(new e5({code:c.code,message:c.message}));break;default:throw new __c.E(c);}else f!=="ack"&&d.G.error("request has already been handled and resolved or was not sent from this client",
{tags:new Map([["type",f],["requestId",`${e}`]])});break;case "request":Scc(this.requestHandler,c);break;default:throw new __c.E(c);}},a,b.Nf("bus"));this.client=new Hdc(a.Nz,b.Nf("client"));this.requestHandler=new Idc(a,b.Nf("requestHandler"))}},Jdc=class{constructor(a,b,c){this.Jca=a;this.Nz=(d,e,f)=>this.PZ.send({type:"request",requestId:d,path:e,payload:f});this.Aqb=d=>{switch(d.type){case "ack":this.Jca({type:"ack",requestId:d.requestId});break;case "error":this.Jca({type:"error",requestId:d.requestId,
code:d.code,message:d.message});break;case "response":this.Jca({type:"response",requestId:d.requestId,payload:d.payload});break;case "request":this.Jca({type:"request",requestId:d.requestId,path:d.path,payload:d.payload});break;default:throw new __c.E(d);}};this.PZ=new Fdc({btb:this.Aqb},b,c)}};var Tcc={SEa:"null",L_a:"*"};var Ycc="canva-dev.com canva-dev.cn canva-staging.com canva-staging.cn canva.com canva.cn canva-apps.com canva-apps.cn canva-apps-dev.com canva-apps-dev.cn canva-apps-staging.com canva-apps-staging.cn".split(" ");var $cc=J(()=>({config:__c.Y(1)}));var adc=J(()=>({}));var cdc=J(()=>({config:X(1)}));var ddc=J(()=>({}));var sdc=class{constructor(a){this.R$=a}};var fdc=J(()=>({config:__c.Y(1)}));var f5=J(()=>({type:__c.F("A?",1,"RECOLORABLE"),id:X(1),value:X(2)}));var Kdc=J(()=>({borderRadius:rK(1),borderWidth:rK(2)}));var g5=J(()=>({type:__c.F("A?",2,"BORDERABLE"),id:X(1),value:__c.Xa(2,Kdc)}));var hdc=J(()=>({config:X(1),width:rK(2),height:rK(3),uW:__c.Za(4,f5),G$a:__c.Za(5,g5)}));var jdc=__c.nb(()=>({type:[1,f5,2,g5]}),()=>({}));var kdc=J(()=>({config:X(1),width:rK(2),height:rK(3)}));var mdc=J(()=>({config:X(1),width:rK(2),height:rK(3),uW:__c.Za(4,f5),G$a:__c.Za(5,g5)}));var ndc=J(()=>({}));var qdc=class{constructor(a){this.R$=a}};var Ldc=class{async bz(a,b){const c=await tdc(a,this.G,{Rsa:e=>{var f;(f=this.config.Zaa)===null||f===void 0||f.BEa(e,b);return new ddc}}),d=wdc(()=>b.config,async e=>bdc(c,{config:e}));this.rg.set(a,d);await bdc(c,{config:b.config})}gP(a){var b;(b=this.rg.get(a))===null||b===void 0||b();this.rg.delete(a)}constructor(a,b){this.config=a;this.G=b;this.rg=new Map}};var udc=J(()=>({id:X("id",1),NKb:__c.AK("includeEmbed",2),OKb:__c.AK("includeFavicon",3),Gjb:__c.AK("includeFileUrls",4),PKb:__c.AK("includeFileEmbedHtml",5),Bj:__c.Y("documentId",21),a0:__c.Y("documentExtension",22)}));var Mdc=class{async bz(a,b){var c;const d=g=>ldc(f,new f5(g)),e=this.config.Zaa;e&&(c={Rsa:g=>{e.BEa(g,b,d);return new ndc}});const f=await rdc(a,this.G,c);c=wdc(()=>b.config,async g=>{const h=await idc(f,{config:g});h.config&&h.config!==g&&(e===null||e===void 0||e.BEa(h,b,d))});this.rg.set(a,c);a=await idc(f,{config:b.config});e===null||e===void 0||e.BEa(a,b,d)}gP(a){var b;(b=this.rg.get(a))===null||b===void 0||b();this.rg.delete(a)}constructor(a,b,c){this.config=a;this.sI=b;this.G=c;this.rg=new Map}};var Ndc=__c.c5()(({Zg:a,aa:b})=>{a=a.G;const c=new Edc,d=new Mdc(c,b.sI,a);return Qcc(({data:{element:e},Dm:{q7a:f,H7a:g}})=>{const [h,k]=Adc(void 0);zdc(()=>{vdc(d,e.xKa).then(l=>k(l))},[e.xKa]);return h?xdc(f,{url:h,bz:l=>d.bz(l,e),gP:l=>d.gP(l)}):xdc(g,{})},{config:c,PGb:new Ldc(c,a)})});__c.NVa={qkb:function(a){function b({Lz:g,Sg:h,aa:k,t7:l="default"}){const m=g.id;g=g.et;h=d.mkb(m,g,h({Zg:{...e,Ya:e.pf.mu(`widgets.rendering.clients.${l}`)},$Na:{...f,Ua:e.Ua},aa:k}));return{id:m,et:g,hQb:h,t7:l}}const c=a.aAb,d=a.m8,e=a.Zg,f=a.$Na;return{wJa:b({Lz:c.wJa,Sg:Cdc,t7:"blueprint",aa:{Hna:a.Hna}}),iqa:c.iqa?Promise.all([c.iqa,__webpack_require__.me(270376).then(()=>__c.Odc),__webpack_require__.me(309241).then(()=>__c.Pdc),__webpack_require__.me(726606).then(()=>__c.Qdc),__webpack_require__.me(555219).then(()=>
__c.Rdc),__webpack_require__.me(756388).then(()=>__c.Sdc),__webpack_require__.me(516583).then(()=>__c.Tdc),__webpack_require__.me(93698).then(()=>__c.Udc)]).then(([g,h,k,l,m,n,p,q])=>({wMa:b({Lz:g.wMa,Sg:h.Sg,aa:{}}),xMa:b({Lz:g.xMa,Sg:k.Sg,aa:{}}),yMa:b({Lz:g.yMa,Sg:l.Sg,aa:{}}),zMa:b({Lz:g.zMa,Sg:m.Sg,aa:{}}),AMa:b({Lz:g.AMa,Sg:n.Sg,aa:{}}),BMa:b({Lz:g.BMa,Sg:p.Sg,aa:{}}),CMa:b({Lz:g.CMa,Sg:q.Sg,aa:{}})})):void 0,wKa:b({Lz:c.wKa,Sg:Ndc,t7:"codelet",aa:{sI:e.sI}}),form:c.form?Promise.all([c.form,
__webpack_require__.me(313335).then(()=>__c.Vdc)]).then(([g,h])=>b({Lz:g,Sg:h.Sg,t7:"form",aa:{Yra:e.Yra}})):void 0,PBa:c.PBa?Promise.all([c.PBa,__webpack_require__.me(843836).then(()=>__c.Wdc)]).then(([g,h])=>b({Lz:g,Sg:h.Sg,t7:"3d",aa:{}})):void 0}},rkb:function(a){function b(e,f){f=c.nkb(e,f());return{id:e,et:f}}const c=a.AFa,d=__c.Sq("c79472f0",!1);return{wJa:b("w:wnJF5T87v",Bdc),iqa:a.Ceb?Promise.all([__webpack_require__.me(270376).then(()=>__c.Odc),__webpack_require__.me(309241).then(()=>__c.Pdc),
__webpack_require__.me(726606).then(()=>__c.Qdc),__webpack_require__.me(555219).then(()=>__c.Rdc),__webpack_require__.me(756388).then(()=>__c.Sdc),__webpack_require__.me(516583).then(()=>__c.Tdc),__webpack_require__.me(93698).then(()=>__c.Udc)]).then(([e,f,g,h,k,l,m])=>({wMa:b("w:cm9wgGptP",e.Pn),xMa:b("w:yLMS4dWnl",f.Pn),yMa:b("w:2flp30CGQ",g.Pn),zMa:b("w:1Nv6K6Dtv",h.Pn),AMa:b("w:5Nv6K6Dtv",k.Pn),BMa:b("w:6Nv6K6Dtv",l.Pn),CMa:b("w:7Nv6K6Dtv",m.Pn)})):void 0,wKa:b("w:JR4G8hDDg",Ddc),form:d?__webpack_require__.me(313335).then(()=>
__c.Vdc).then(e=>b("widget:form",e.Pn)):void 0,PBa:a.yeb?__webpack_require__.me(843836).then(()=>__c.Wdc).then(e=>b("w:2pbXJMtm1",e.Pn)):void 0}}};
}).call(self, self._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/2f4a0b09f5ea034d.js.map